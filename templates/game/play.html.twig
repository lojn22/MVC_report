{% extends "base.html.twig" %}

{% block title %}21{% endblock %}
{% block body %}
    <div class="top-left">
        <button class="button" onclick="window.location.href='{{ path('game_reset') }}'">Starta ny omgång</button>
    </div>

    <div class="game-board">

    <div class="bank">
        <h2>Banken</h2>
        <ul class="hand">
            {% for card in bankHand.getCards() %}
                {% set suit = card.getSuit() %}
                {% set value = card.getValue() %}
                <div class="card {% if suit in ['♥️','♦️'] %}red{% endif %}">
                    {{ value }}{{ suit }}
                </div>
            {% endfor %}
        </ul>
        {% if bankHand.getSum() > 0 %}
            <p>Summa: {{ bankHand.getSum() }}</p>
        {% endif %}
    </div>

    {% if game.getWinner() %}
        <div class="deck">
            <img src="{{ asset('img/deck.png') }}" alt="Kortlek">
            <p>Spelet är över</p>
        </div>
    {% else %}
        <div class="deck" onclick="window.location.href='{{ path('play', {'action': 'draw'}) }}'">
            <img src="{{ asset('img/deck.png') }}" alt="Kortlek">
            <p class="deck-text">Klicka för att dra ett kort</p>
        </div>
    {% endif %}

    <div class="player">
        <h2>Spelare</h2>
        <ul class="hand">
            {% for card in playerHand.cards %}
                {% set suit = card.getSuit() %}
                {% set value = card.getValue() %}
                <div class="card {% if suit in ['♥️','♦️'] %}red{% endif %}">
                    {{ value }}{{ suit }}
                </div>
            {% endfor %}
        </ul>
        <p>Summa: {{ playerHand.getSum() }}</p>
        {% if playerHand.getSum() > 0 %}
            <form method="post" action="{{ path('play', {'action': 'stay'}) }}">
                <button type="submit">Stanna</button>
            </form>
        {% endif %}
    </div>
</div>

{% if winner is not null %}
<div class="result">
    <h2>{{ winner == 'Player' ? 'Du vann!' : 'Banken vann!' }}</h2>
</div>
{% endif %}

{% endblock %}
